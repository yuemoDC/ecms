{"ast":null,"code":"import { resolveComponent as _resolveComponent, createVNode as _createVNode, createCommentVNode as _createCommentVNode, createElementVNode as _createElementVNode, withCtx as _withCtx, toDisplayString as _toDisplayString, createTextVNode as _createTextVNode, openBlock as _openBlock, createBlock as _createBlock, createElementBlock as _createElementBlock } from \"vue\";\nconst _hoisted_1 = {\n  style: {\n    \"margin-right\": \"10px\"\n  }\n};\nconst _hoisted_2 = {\n  class: \"user-info\"\n};\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_AppNavbar = _resolveComponent(\"AppNavbar\");\n  const _component_el_header = _resolveComponent(\"el-header\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_col = _resolveComponent(\"el-col\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_row = _resolveComponent(\"el-row\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _component_el_main = _resolveComponent(\"el-main\");\n  const _component_el_container = _resolveComponent(\"el-container\");\n  const _component_el_tag = _resolveComponent(\"el-tag\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_createVNode(_component_AppNavbar), _createCommentVNode(\" 引入导航栏组件 \"), _createVNode(_component_el_container, null, {\n    default: _withCtx(() => [_createVNode(_component_el_header, null, {\n      default: _withCtx(() => _cache[9] || (_cache[9] = [_createElementVNode(\"h2\", null, \"商家入驻申请\", -1 /* HOISTED */)])),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_main, null, {\n      default: _withCtx(() => [_createCommentVNode(\" 搜索框和状态筛选 \"), _createVNode(_component_el_row, {\n        class: \"toolbar\",\n        style: {\n          \"margin-bottom\": \"20px\"\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_col, {\n          span: 8\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_input, {\n            modelValue: $setup.searchQuery,\n            \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $setup.searchQuery = $event),\n            placeholder: \"搜索商家名称或联系方式\",\n            \"prefix-icon\": \"el-icon-search\",\n            clearable: \"\",\n            onInput: $setup.searchApplications\n          }, null, 8 /* PROPS */, [\"modelValue\", \"onInput\"])]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_col, {\n          span: 8\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_select, {\n            modelValue: $setup.selectedStatus,\n            \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $setup.selectedStatus = $event),\n            placeholder: \"选择申请状态\",\n            onChange: $setup.filterByStatus\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_option, {\n              label: \"所有\",\n              value: \"\"\n            }), _createVNode(_component_el_option, {\n              label: \"待审核\",\n              value: \"pending\"\n            }), _createVNode(_component_el_option, {\n              label: \"已通过\",\n              value: \"approved\"\n            }), _createVNode(_component_el_option, {\n              label: \"已拒绝\",\n              value: \"rejected\"\n            })]),\n            _: 1 /* STABLE */\n          }, 8 /* PROPS */, [\"modelValue\", \"onChange\"])]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }), _createCommentVNode(\" 商家入驻申请列表 \"), _createVNode(_component_el_table, {\n        data: $setup.filteredApplications,\n        style: {\n          \"width\": \"100%\"\n        }\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_table_column, {\n          prop: \"merchantName\",\n          label: \"商家申请名称\",\n          width: \"180\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"contactInfo\",\n          label: \"联系方式\",\n          width: \"220\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"businessScope\",\n          label: \"经营范围\",\n          width: \"180\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"license\",\n          label: \"资质证明\",\n          width: \"180\"\n        }), _createVNode(_component_el_table_column, {\n          prop: \"status\",\n          label: \"申请状态\",\n          width: \"200\"\n        }, {\n          default: _withCtx(scope => [_createElementVNode(\"span\", _hoisted_1, _toDisplayString($setup.formatStatus(scope.row.status)), 1 /* TEXT */)]),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_table_column, {\n          label: \"操作\",\n          width: \"200\"\n        }, {\n          default: _withCtx(scope => [_createVNode(_component_el_button, {\n            onClick: $event => $setup.editApplication(scope.row),\n            type: \"primary\",\n            size: \"small\"\n          }, {\n            default: _withCtx(() => _cache[10] || (_cache[10] = [_createTextVNode(\" 编辑 \")])),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_button, {\n            onClick: $event => $setup.deleteApplication(scope.row),\n            type: \"danger\",\n            size: \"small\"\n          }, {\n            default: _withCtx(() => _cache[11] || (_cache[11] = [_createTextVNode(\" 删除 \")])),\n            _: 2 /* DYNAMIC */\n          }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n          _: 1 /* STABLE */\n        })]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"data\"]), _createCommentVNode(\" 添加/编辑商家入驻申请表单 \"), _createVNode(_component_el_dialog, {\n        title: $setup.newApplication.applicationId ? '编辑商家入驻申请' : '新增商家入驻申请',\n        modelValue: $setup.dialogVisible,\n        \"onUpdate:modelValue\": _cache[8] || (_cache[8] = $event => $setup.dialogVisible = $event),\n        width: \"40%\"\n      }, {\n        footer: _withCtx(() => [_createVNode(_component_el_button, {\n          onClick: _cache[7] || (_cache[7] = $event => $setup.dialogVisible = false)\n        }, {\n          default: _withCtx(() => _cache[12] || (_cache[12] = [_createTextVNode(\"取消\")])),\n          _: 1 /* STABLE */\n        }), _createVNode(_component_el_button, {\n          type: \"primary\",\n          onClick: $setup.saveApplication\n        }, {\n          default: _withCtx(() => _cache[13] || (_cache[13] = [_createTextVNode(\"保存\")])),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"onClick\"])]),\n        default: _withCtx(() => [_createVNode(_component_el_form, {\n          model: $setup.newApplication,\n          rules: $setup.rules,\n          ref: \"formRef\",\n          \"label-width\": \"120px\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_form_item, {\n            label: \"商家名称\",\n            prop: \"merchantName\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: $setup.newApplication.merchantName,\n              \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $setup.newApplication.merchantName = $event)\n            }, null, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"联系方式\",\n            prop: \"contactInfo\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: $setup.newApplication.contactInfo,\n              \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $setup.newApplication.contactInfo = $event)\n            }, null, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"经营范围\",\n            prop: \"businessScope\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: $setup.newApplication.businessScope,\n              \"onUpdate:modelValue\": _cache[4] || (_cache[4] = $event => $setup.newApplication.businessScope = $event)\n            }, null, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          }), _createVNode(_component_el_form_item, {\n            label: \"资质证明\",\n            prop: \"license\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: $setup.newApplication.license,\n              \"onUpdate:modelValue\": _cache[5] || (_cache[5] = $event => $setup.newApplication.license = $event),\n              placeholder: \"请输入资质证明文件路径或编号\"\n            }, null, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          }), _createCommentVNode(\" 隐藏用户ID字段，不让用户看到 \"), _createVNode(_component_el_form_item, {\n            prop: \"userId\"\n          }, {\n            default: _withCtx(() => [_createVNode(_component_el_input, {\n              modelValue: $setup.newApplication.userId,\n              \"onUpdate:modelValue\": _cache[6] || (_cache[6] = $event => $setup.newApplication.userId = $event),\n              type: \"hidden\"\n            }, null, 8 /* PROPS */, [\"modelValue\"])]),\n            _: 1 /* STABLE */\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"model\", \"rules\"])]),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"title\", \"modelValue\"]), _createVNode(_component_el_button, {\n        type: \"primary\",\n        onClick: $setup.showNewApplicationForm,\n        style: {\n          \"margin-top\": \"20px\"\n        }\n      }, {\n        default: _withCtx(() => _cache[14] || (_cache[14] = [_createTextVNode(\" 新增商家入驻申请 \")])),\n        _: 1 /* STABLE */\n      }, 8 /* PROPS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }), _createCommentVNode(\" 显示当前用户的ID \"), _createElementVNode(\"div\", _hoisted_2, [$setup.currentUser ? (_openBlock(), _createBlock(_component_el_tag, {\n    key: 0,\n    type: \"success\"\n  }, {\n    default: _withCtx(() => [_createTextVNode(\" 当前登录用户 ID: \" + _toDisplayString($setup.currentUser.id), 1 /* TEXT */)]),\n    _: 1 /* STABLE */\n  })) : (_openBlock(), _createBlock(_component_el_tag, {\n    key: 1,\n    type: \"info\"\n  }, {\n    default: _withCtx(() => _cache[15] || (_cache[15] = [_createTextVNode(\" 未登录 \")])),\n    _: 1 /* STABLE */\n  }))])]);\n}","map":{"version":3,"names":["style","class","_createElementBlock","_createVNode","_component_AppNavbar","_createCommentVNode","_component_el_container","default","_withCtx","_component_el_header","_cache","_createElementVNode","_","_component_el_main","_component_el_row","_component_el_col","span","_component_el_input","modelValue","$setup","searchQuery","$event","placeholder","clearable","onInput","searchApplications","_component_el_select","selectedStatus","onChange","filterByStatus","_component_el_option","label","value","_component_el_table","data","filteredApplications","_component_el_table_column","prop","width","scope","_hoisted_1","_toDisplayString","formatStatus","row","status","_component_el_button","onClick","editApplication","type","size","_createTextVNode","deleteApplication","_component_el_dialog","title","newApplication","applicationId","dialogVisible","footer","saveApplication","_component_el_form","model","rules","ref","_component_el_form_item","merchantName","contactInfo","businessScope","license","userId","showNewApplicationForm","_hoisted_2","currentUser","_createBlock","_component_el_tag","key","id"],"sources":["E:\\软件工程实训\\ecmsV1.2\\ecmsvue\\src\\views\\MerchantApplication.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <AppNavbar /> <!-- 引入导航栏组件 -->\r\n    <el-container>\r\n      <el-header>\r\n        <h2>商家入驻申请</h2>\r\n      </el-header>\r\n      <el-main>\r\n        <!-- 搜索框和状态筛选 -->\r\n        <el-row class=\"toolbar\" style=\"margin-bottom: 20px;\">\r\n          <el-col :span=\"8\">\r\n            <el-input\r\n                v-model=\"searchQuery\"\r\n                placeholder=\"搜索商家名称或联系方式\"\r\n                prefix-icon=\"el-icon-search\"\r\n                clearable\r\n                @input=\"searchApplications\"\r\n            ></el-input>\r\n          </el-col>\r\n          <el-col :span=\"8\">\r\n            <el-select v-model=\"selectedStatus\" placeholder=\"选择申请状态\" @change=\"filterByStatus\">\r\n              <el-option label=\"所有\" value=\"\"></el-option>\r\n              <el-option label=\"待审核\" value=\"pending\"></el-option>\r\n              <el-option label=\"已通过\" value=\"approved\"></el-option>\r\n              <el-option label=\"已拒绝\" value=\"rejected\"></el-option>\r\n            </el-select>\r\n          </el-col>\r\n        </el-row>\r\n\r\n        <!-- 商家入驻申请列表 -->\r\n        <el-table :data=\"filteredApplications\" style=\"width: 100%\">\r\n          <el-table-column prop=\"merchantName\" label=\"商家申请名称\" width=\"180\" />\r\n          <el-table-column prop=\"contactInfo\" label=\"联系方式\" width=\"220\" />\r\n          <el-table-column prop=\"businessScope\" label=\"经营范围\" width=\"180\" />\r\n          <el-table-column prop=\"license\" label=\"资质证明\" width=\"180\" />\r\n          <el-table-column prop=\"status\" label=\"申请状态\" width=\"200\">\r\n            <template #default=\"scope\">\r\n              <span style=\"margin-right: 10px\">{{ formatStatus(scope.row.status) }}</span>\r\n            </template>\r\n          </el-table-column>\r\n          <el-table-column label=\"操作\" width=\"200\">\r\n            <template #default=\"scope\">\r\n              <el-button\r\n                  @click=\"editApplication(scope.row)\"\r\n                  type=\"primary\"\r\n                  size=\"small\"\r\n              >\r\n                编辑\r\n              </el-button>\r\n              <el-button\r\n                  @click=\"deleteApplication(scope.row)\"\r\n                  type=\"danger\"\r\n                  size=\"small\"\r\n              >\r\n                删除\r\n              </el-button>\r\n            </template>\r\n          </el-table-column>\r\n        </el-table>\r\n\r\n        <!-- 添加/编辑商家入驻申请表单 -->\r\n        <el-dialog\r\n            :title=\"newApplication.applicationId ? '编辑商家入驻申请' : '新增商家入驻申请'\"\r\n            v-model=\"dialogVisible\"\r\n            width=\"40%\"\r\n        >\r\n          <el-form\r\n              :model=\"newApplication\"\r\n              :rules=\"rules\"\r\n              ref=\"formRef\"\r\n              label-width=\"120px\"\r\n          >\r\n            <el-form-item label=\"商家名称\" prop=\"merchantName\">\r\n              <el-input v-model=\"newApplication.merchantName\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"联系方式\" prop=\"contactInfo\">\r\n              <el-input v-model=\"newApplication.contactInfo\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"经营范围\" prop=\"businessScope\">\r\n              <el-input v-model=\"newApplication.businessScope\" />\r\n            </el-form-item>\r\n            <el-form-item label=\"资质证明\" prop=\"license\">\r\n              <el-input v-model=\"newApplication.license\" placeholder=\"请输入资质证明文件路径或编号\" />\r\n            </el-form-item>\r\n            <!-- 隐藏用户ID字段，不让用户看到 -->\r\n            <el-form-item prop=\"userId\">\r\n              <el-input v-model=\"newApplication.userId\" type=\"hidden\" />\r\n            </el-form-item>\r\n          </el-form>\r\n\r\n          <template #footer>\r\n            <el-button @click=\"dialogVisible = false\">取消</el-button>\r\n            <el-button type=\"primary\" @click=\"saveApplication\">保存</el-button>\r\n          </template>\r\n        </el-dialog>\r\n\r\n\r\n        <el-button type=\"primary\" @click=\"showNewApplicationForm\" style=\"margin-top: 20px;\">\r\n          新增商家入驻申请\r\n        </el-button>\r\n      </el-main>\r\n    </el-container>\r\n\r\n    <!-- 显示当前用户的ID -->\r\n    <div class=\"user-info\">\r\n      <el-tag type=\"success\" v-if=\"currentUser\">\r\n        当前登录用户 ID: {{ currentUser.id }}\r\n      </el-tag>\r\n      <el-tag type=\"info\" v-else>\r\n        未登录\r\n      </el-tag>\r\n    </div>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport { ref, onMounted } from 'vue';\r\nimport { ElMessage } from 'element-plus';\r\nimport axios from 'axios';\r\nimport AppAdminNavbar from \"@/components/MerchantNavbar.vue\"; // 引入导航栏组件\r\n\r\nexport default {\r\n  name: 'MerchantApplication',\r\n  components: { AppNavbar: AppAdminNavbar },\r\n  setup() {\r\n    const currentUser = ref(null); // 用来存储当前登录的用户信息\r\n    let currentUserId = localStorage.getItem('userId'); // 获取当前登录用户的 userId\r\n    const applications = ref([]);\r\n    const filteredApplications = ref([]);\r\n    const dialogVisible = ref(false);\r\n    const searchQuery = ref('');\r\n    const selectedStatus = ref('');\r\n    const newApplication = ref({\r\n      merchantName: '',\r\n      contactInfo: '',\r\n      businessScope: '',\r\n      license: '',\r\n      userId: currentUserId, // 设置为当前登录用户的 userId\r\n      status: 'pending',\r\n    });\r\n    const formRef = ref(null);\r\n\r\n    const getCurrentUser = () => {\r\n      const userData = localStorage.getItem('user');\r\n      if (userData) {\r\n        try {\r\n          const parsedUserData = JSON.parse(userData);\r\n          if (parsedUserData.success) {\r\n            currentUser.value = {\r\n              role: parsedUserData.role,\r\n              id: parsedUserData.userid, // 设置为当前登录用户的 id\r\n              token: parsedUserData.token,\r\n              username: parsedUserData.username,\r\n            };\r\n            currentUserId = parsedUserData.userid;\r\n          } else {\r\n            console.error('用户信息不正确:', parsedUserData);\r\n          }\r\n        } catch (e) {\r\n          console.error('解析用户信息失败:', e);\r\n        }\r\n      }\r\n    };\r\n    const formatStatus = (status) => {\r\n      const statusMap = {\r\n        pending: '待审核',\r\n        approved: '已通过',\r\n        rejected: '已拒绝'\r\n      }\r\n      return statusMap[status] || '未知状态'\r\n    }\r\n    const rules = {\r\n      merchantName: [\r\n        { required: true, message: '商家名称不能为空', trigger: 'blur' }\r\n      ],\r\n      contactInfo: [\r\n        { required: true, message: '联系方式不能为空', trigger: 'blur' }\r\n      ],\r\n      businessScope: [\r\n        { required: true, message: '经营范围不能为空', trigger: 'blur' }\r\n      ],\r\n      license: [\r\n        { required: true, message: '资质证明不能为空', trigger: 'blur' }\r\n      ]\r\n    };\r\n\r\n\r\n    // 获取商家入驻申请\r\n    const fetchApplications = async () => {\r\n      try {\r\n        console.log(\"Fetching with userId:\", currentUserId);\r\n        // 将 userId 作为参数传递给后端 API，确保只获取当前用户的商家申请\r\n        const { data } = await axios.get('http://localhost:8080/api/merchant-applications', {\r\n          params: { userId: currentUserId },\r\n        });\r\n        applications.value = data;\r\n        filteredApplications.value = data; // 设置默认显示当前用户的商家申请\r\n      } catch (error) {\r\n        ElMessage.error('加载商家入驻申请失败');\r\n      }\r\n    };\r\n\r\n    // 搜索商家申请\r\n    const searchApplications = () => {\r\n      const query = searchQuery.value.toLowerCase();\r\n      filteredApplications.value = applications.value.filter(application => {\r\n        return (\r\n            application.merchantName.toLowerCase().includes(query) ||\r\n            application.contactInfo.toLowerCase().includes(query)\r\n        );\r\n      });\r\n    };\r\n\r\n    // 根据状态筛选\r\n    const filterByStatus = () => {\r\n      if (selectedStatus.value === '') {\r\n        filteredApplications.value = applications.value;\r\n      } else {\r\n        filteredApplications.value = applications.value.filter(application => application.status === selectedStatus.value);\r\n      }\r\n    };\r\n\r\n    // 审核通过操作\r\n    const approveApplication = async (application) => {\r\n      try {\r\n        const response = await axios.put(\r\n            `http://localhost:8080/api/merchant-applications/${application.applicationId}/approve`\r\n        );\r\n        if (response.status === 200) {\r\n          ElMessage.success('审核通过成功');\r\n          await fetchApplications();\r\n        } else {\r\n          ElMessage.error(response.data || '审核操作失败');\r\n        }\r\n      } catch (error) {\r\n        ElMessage.error(error.response?.data || '审核操作失败');\r\n      }\r\n    };\r\n\r\n    // 拒绝操作\r\n    const rejectApplication = async (application) => {\r\n      try {\r\n        await axios.put(`http://localhost:8080/api/merchant-applications/${application.applicationId}/reject`);\r\n        ElMessage.success('已拒绝申请');\r\n        await fetchApplications();\r\n      } catch (error) {\r\n        ElMessage.error('拒绝操作失败');\r\n      }\r\n    };\r\n\r\n    // 编辑商家申请\r\n    const editApplication = (application) => {\r\n      newApplication.value = { ...application };\r\n      dialogVisible.value = true;\r\n    };\r\n\r\n    // 显示新增商家申请表单\r\n    const showNewApplicationForm = () => {\r\n      newApplication.value = {\r\n        merchantName: '',\r\n        contactInfo: '',\r\n        businessScope: '',\r\n        license: '',\r\n        userId: currentUserId, // 确保 userId 设置为当前用户\r\n        status: 'pending',\r\n      };\r\n      dialogVisible.value = true;\r\n    };\r\n\r\n    // 保存商家申请\r\n    const saveApplication = async () => {\r\n      try {\r\n        await formRef.value.validate(); // 验证表单\r\n        if (!newApplication.value.userId) {\r\n          newApplication.value.userId = currentUserId;\r\n        }\r\n\r\n        if (newApplication.value.applicationId) {\r\n          await axios.put(\r\n              `http://localhost:8080/api/merchant-applications/${newApplication.value.applicationId}`,\r\n              newApplication.value\r\n          );\r\n          ElMessage.success('更新成功');\r\n        } else {\r\n          await axios.post(\r\n              'http://localhost:8080/api/merchant-applications',\r\n              newApplication.value\r\n          );\r\n          ElMessage.success('新增成功');\r\n        }\r\n        dialogVisible.value = false;\r\n        await fetchApplications();\r\n      } catch (error) {\r\n        if (error.response && error.response.data) {\r\n          ElMessage.error('保存失败: ' + error.response.data.message || '请检查表单输入');\r\n        } else {\r\n          ElMessage.error('保存失败: ' + (error.message || '发生未知错误'));\r\n        }\r\n      }\r\n    };\r\n\r\n    // 删除商家申请\r\n    const deleteApplication = async (application) => {\r\n      try {\r\n        await axios.delete(\r\n            `http://localhost:8080/api/merchant-applications/${application.applicationId}`\r\n        );\r\n        ElMessage.success('删除成功');\r\n        await fetchApplications();\r\n      } catch (error) {\r\n        ElMessage.error('删除失败');\r\n      }\r\n    };\r\n\r\n    // 初始化数据\r\n    onMounted(() => {\r\n      getCurrentUser(); // 获取当前用户\r\n      fetchApplications();\r\n    });\r\n\r\n    return {\r\n      rules,\r\n      currentUser,\r\n      applications,\r\n      filteredApplications,\r\n      dialogVisible,\r\n      newApplication,\r\n      searchQuery,\r\n      selectedStatus,\r\n      formRef,\r\n      formatStatus,\r\n      fetchApplications,\r\n      approveApplication,\r\n      rejectApplication,\r\n      editApplication,\r\n      showNewApplicationForm,\r\n      saveApplication,\r\n      deleteApplication,\r\n      searchApplications,\r\n      filterByStatus,\r\n    };\r\n  },\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.toolbar {\r\n  margin-bottom: 20px;\r\n}\r\n.user-info {\r\n  position: absolute;\r\n  top: 20px;\r\n  right: 20px;\r\n}\r\n</style>\r\n"],"mappings":";;EAqCoBA,KAA0B,EAA1B;IAAA;EAAA;AAA0B;;EAmErCC,KAAK,EAAC;AAAW;;;;;;;;;;;;;;;;;;uBAvGxBC,mBAAA,CA+GM,cA9GJC,YAAA,CAAaC,oBAAA,GAACC,mBAAA,aAAgB,EAC9BF,YAAA,CAkGeG,uBAAA;IArGnBC,OAAA,EAAAC,QAAA,CAIM,MAEY,CAFZL,YAAA,CAEYM,oBAAA;MANlBF,OAAA,EAAAC,QAAA,CAKQ,MAAeE,MAAA,QAAAA,MAAA,OAAfC,mBAAA,CAAe,YAAX,QAAM,oB;MALlBC,CAAA;QAOMT,YAAA,CA6FUU,kBAAA;MApGhBN,OAAA,EAAAC,QAAA,CAQQ,MAAiB,CAAjBH,mBAAA,cAAiB,EACjBF,YAAA,CAkBSW,iBAAA;QAlBDb,KAAK,EAAC,SAAS;QAACD,KAA4B,EAA5B;UAAA;QAAA;;QAThCO,OAAA,EAAAC,QAAA,CAUU,MAQS,CARTL,YAAA,CAQSY,iBAAA;UARAC,IAAI,EAAE;QAAC;UAV1BT,OAAA,EAAAC,QAAA,CAWY,MAMY,CANZL,YAAA,CAMYc,mBAAA;YAjBxBC,UAAA,EAYyBC,MAAA,CAAAC,WAAW;YAZpC,uBAAAV,MAAA,QAAAA,MAAA,MAAAW,MAAA,IAYyBF,MAAA,CAAAC,WAAW,GAAAC,MAAA;YACpBC,WAAW,EAAC,aAAa;YACzB,aAAW,EAAC,gBAAgB;YAC5BC,SAAS,EAAT,EAAS;YACRC,OAAK,EAAEL,MAAA,CAAAM;;UAhBxBb,CAAA;YAmBUT,YAAA,CAOSY,iBAAA;UAPAC,IAAI,EAAE;QAAC;UAnB1BT,OAAA,EAAAC,QAAA,CAoBY,MAKY,CALZL,YAAA,CAKYuB,oBAAA;YAzBxBR,UAAA,EAoBgCC,MAAA,CAAAQ,cAAc;YApB9C,uBAAAjB,MAAA,QAAAA,MAAA,MAAAW,MAAA,IAoBgCF,MAAA,CAAAQ,cAAc,GAAAN,MAAA;YAAEC,WAAW,EAAC,QAAQ;YAAEM,QAAM,EAAET,MAAA,CAAAU;;YApB9EtB,OAAA,EAAAC,QAAA,CAqBc,MAA2C,CAA3CL,YAAA,CAA2C2B,oBAAA;cAAhCC,KAAK,EAAC,IAAI;cAACC,KAAK,EAAC;gBAC5B7B,YAAA,CAAmD2B,oBAAA;cAAxCC,KAAK,EAAC,KAAK;cAACC,KAAK,EAAC;gBAC7B7B,YAAA,CAAoD2B,oBAAA;cAAzCC,KAAK,EAAC,KAAK;cAACC,KAAK,EAAC;gBAC7B7B,YAAA,CAAoD2B,oBAAA;cAAzCC,KAAK,EAAC,KAAK;cAACC,KAAK,EAAC;;YAxB3CpB,CAAA;;UAAAA,CAAA;;QAAAA,CAAA;UA6BQP,mBAAA,cAAiB,EACjBF,YAAA,CA4BW8B,mBAAA;QA5BAC,IAAI,EAAEf,MAAA,CAAAgB,oBAAoB;QAAEnC,KAAmB,EAAnB;UAAA;QAAA;;QA9B/CO,OAAA,EAAAC,QAAA,CA+BU,MAAkE,CAAlEL,YAAA,CAAkEiC,0BAAA;UAAjDC,IAAI,EAAC,cAAc;UAACN,KAAK,EAAC,QAAQ;UAACO,KAAK,EAAC;YAC1DnC,YAAA,CAA+DiC,0BAAA;UAA9CC,IAAI,EAAC,aAAa;UAACN,KAAK,EAAC,MAAM;UAACO,KAAK,EAAC;YACvDnC,YAAA,CAAiEiC,0BAAA;UAAhDC,IAAI,EAAC,eAAe;UAACN,KAAK,EAAC,MAAM;UAACO,KAAK,EAAC;YACzDnC,YAAA,CAA2DiC,0BAAA;UAA1CC,IAAI,EAAC,SAAS;UAACN,KAAK,EAAC,MAAM;UAACO,KAAK,EAAC;YACnDnC,YAAA,CAIkBiC,0BAAA;UAJDC,IAAI,EAAC,QAAQ;UAACN,KAAK,EAAC,MAAM;UAACO,KAAK,EAAC;;UACrC/B,OAAO,EAAAC,QAAA,CAC4D+B,KADrD,KACvB5B,mBAAA,CAA4E,QAA5E6B,UAA4E,EAAAC,gBAAA,CAAxCtB,MAAA,CAAAuB,YAAY,CAACH,KAAK,CAACI,GAAG,CAACC,MAAM,kB;UArC/EhC,CAAA;YAwCUT,YAAA,CAiBkBiC,0BAAA;UAjBDL,KAAK,EAAC,IAAI;UAACO,KAAK,EAAC;;UACrB/B,OAAO,EAAAC,QAAA,CAOJ+B,KAPW,KACvBpC,YAAA,CAMY0C,oBAAA;YALPC,OAAK,EAAAzB,MAAA,IAAEF,MAAA,CAAA4B,eAAe,CAACR,KAAK,CAACI,GAAG;YACjCK,IAAI,EAAC,SAAS;YACdC,IAAI,EAAC;;YA7CvB1C,OAAA,EAAAC,QAAA,CA8Ce,MAEDE,MAAA,SAAAA,MAAA,QAhDdwC,gBAAA,CA8Ce,MAED,E;YAhDdtC,CAAA;4DAiDcT,YAAA,CAMY0C,oBAAA;YALPC,OAAK,EAAAzB,MAAA,IAAEF,MAAA,CAAAgC,iBAAiB,CAACZ,KAAK,CAACI,GAAG;YACnCK,IAAI,EAAC,QAAQ;YACbC,IAAI,EAAC;;YApDvB1C,OAAA,EAAAC,QAAA,CAqDe,MAEDE,MAAA,SAAAA,MAAA,QAvDdwC,gBAAA,CAqDe,MAED,E;YAvDdtC,CAAA;;UAAAA,CAAA;;QAAAA,CAAA;mCA4DQP,mBAAA,mBAAsB,EACtBF,YAAA,CAiCYiD,oBAAA;QAhCPC,KAAK,EAAElC,MAAA,CAAAmC,cAAc,CAACC,aAAa;QA9DhDrC,UAAA,EA+DqBC,MAAA,CAAAqC,aAAa;QA/DlC,uBAAA9C,MAAA,QAAAA,MAAA,MAAAW,MAAA,IA+DqBF,MAAA,CAAAqC,aAAa,GAAAnC,MAAA;QACtBiB,KAAK,EAAC;;QA0BGmB,MAAM,EAAAjD,QAAA,CACf,MAAwD,CAAxDL,YAAA,CAAwD0C,oBAAA;UAA5CC,OAAK,EAAApC,MAAA,QAAAA,MAAA,MAAAW,MAAA,IAAEF,MAAA,CAAAqC,aAAa;;UA3F5CjD,OAAA,EAAAC,QAAA,CA2FsD,MAAEE,MAAA,SAAAA,MAAA,QA3FxDwC,gBAAA,CA2FsD,IAAE,E;UA3FxDtC,CAAA;YA4FYT,YAAA,CAAiE0C,oBAAA;UAAtDG,IAAI,EAAC,SAAS;UAAEF,OAAK,EAAE3B,MAAA,CAAAuC;;UA5F9CnD,OAAA,EAAAC,QAAA,CA4F+D,MAAEE,MAAA,SAAAA,MAAA,QA5FjEwC,gBAAA,CA4F+D,IAAE,E;UA5FjEtC,CAAA;;QAAAL,OAAA,EAAAC,QAAA,CAkEU,MAsBU,CAtBVL,YAAA,CAsBUwD,kBAAA;UArBLC,KAAK,EAAEzC,MAAA,CAAAmC,cAAc;UACrBO,KAAK,EAAE1C,MAAA,CAAA0C,KAAK;UACbC,GAAG,EAAC,SAAS;UACb,aAAW,EAAC;;UAtE1BvD,OAAA,EAAAC,QAAA,CAwEY,MAEe,CAFfL,YAAA,CAEe4D,uBAAA;YAFDhC,KAAK,EAAC,MAAM;YAACM,IAAI,EAAC;;YAxE5C9B,OAAA,EAAAC,QAAA,CAyEc,MAAkD,CAAlDL,YAAA,CAAkDc,mBAAA;cAzEhEC,UAAA,EAyEiCC,MAAA,CAAAmC,cAAc,CAACU,YAAY;cAzE5D,uBAAAtD,MAAA,QAAAA,MAAA,MAAAW,MAAA,IAyEiCF,MAAA,CAAAmC,cAAc,CAACU,YAAY,GAAA3C,MAAA;;YAzE5DT,CAAA;cA2EYT,YAAA,CAEe4D,uBAAA;YAFDhC,KAAK,EAAC,MAAM;YAACM,IAAI,EAAC;;YA3E5C9B,OAAA,EAAAC,QAAA,CA4Ec,MAAiD,CAAjDL,YAAA,CAAiDc,mBAAA;cA5E/DC,UAAA,EA4EiCC,MAAA,CAAAmC,cAAc,CAACW,WAAW;cA5E3D,uBAAAvD,MAAA,QAAAA,MAAA,MAAAW,MAAA,IA4EiCF,MAAA,CAAAmC,cAAc,CAACW,WAAW,GAAA5C,MAAA;;YA5E3DT,CAAA;cA8EYT,YAAA,CAEe4D,uBAAA;YAFDhC,KAAK,EAAC,MAAM;YAACM,IAAI,EAAC;;YA9E5C9B,OAAA,EAAAC,QAAA,CA+Ec,MAAmD,CAAnDL,YAAA,CAAmDc,mBAAA;cA/EjEC,UAAA,EA+EiCC,MAAA,CAAAmC,cAAc,CAACY,aAAa;cA/E7D,uBAAAxD,MAAA,QAAAA,MAAA,MAAAW,MAAA,IA+EiCF,MAAA,CAAAmC,cAAc,CAACY,aAAa,GAAA7C,MAAA;;YA/E7DT,CAAA;cAiFYT,YAAA,CAEe4D,uBAAA;YAFDhC,KAAK,EAAC,MAAM;YAACM,IAAI,EAAC;;YAjF5C9B,OAAA,EAAAC,QAAA,CAkFc,MAA0E,CAA1EL,YAAA,CAA0Ec,mBAAA;cAlFxFC,UAAA,EAkFiCC,MAAA,CAAAmC,cAAc,CAACa,OAAO;cAlFvD,uBAAAzD,MAAA,QAAAA,MAAA,MAAAW,MAAA,IAkFiCF,MAAA,CAAAmC,cAAc,CAACa,OAAO,GAAA9C,MAAA;cAAEC,WAAW,EAAC;;YAlFrEV,CAAA;cAoFYP,mBAAA,qBAAwB,EACxBF,YAAA,CAEe4D,uBAAA;YAFD1B,IAAI,EAAC;UAAQ;YArFvC9B,OAAA,EAAAC,QAAA,CAsFc,MAA0D,CAA1DL,YAAA,CAA0Dc,mBAAA;cAtFxEC,UAAA,EAsFiCC,MAAA,CAAAmC,cAAc,CAACc,MAAM;cAtFtD,uBAAA1D,MAAA,QAAAA,MAAA,MAAAW,MAAA,IAsFiCF,MAAA,CAAAmC,cAAc,CAACc,MAAM,GAAA/C,MAAA;cAAE2B,IAAI,EAAC;;YAtF7DpC,CAAA;;UAAAA,CAAA;;QAAAA,CAAA;kDAiGQT,YAAA,CAEY0C,oBAAA;QAFDG,IAAI,EAAC,SAAS;QAAEF,OAAK,EAAE3B,MAAA,CAAAkD,sBAAsB;QAAErE,KAAyB,EAAzB;UAAA;QAAA;;QAjGlEO,OAAA,EAAAC,QAAA,CAiG4F,MAEpFE,MAAA,SAAAA,MAAA,QAnGRwC,gBAAA,CAiG4F,YAEpF,E;QAnGRtC,CAAA;;MAAAA,CAAA;;IAAAA,CAAA;MAuGIP,mBAAA,eAAkB,EAClBM,mBAAA,CAOM,OAPN2D,UAOM,GANyBnD,MAAA,CAAAoD,WAAW,I,cAAxCC,YAAA,CAESC,iBAAA;IA3GfC,GAAA;IAyGc1B,IAAI,EAAC;;IAzGnBzC,OAAA,EAAAC,QAAA,CAyGgD,MAC7B,CA1GnB0C,gBAAA,CAyGgD,cAC7B,GAAAT,gBAAA,CAAGtB,MAAA,CAAAoD,WAAW,CAACI,EAAE,iB;IA1GpC/D,CAAA;uBA4GM4D,YAAA,CAESC,iBAAA;IA9GfC,GAAA;IA4Gc1B,IAAI,EAAC;;IA5GnBzC,OAAA,EAAAC,QAAA,CA4GiC,MAE3BE,MAAA,SAAAA,MAAA,QA9GNwC,gBAAA,CA4GiC,OAE3B,E;IA9GNtC,CAAA","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}