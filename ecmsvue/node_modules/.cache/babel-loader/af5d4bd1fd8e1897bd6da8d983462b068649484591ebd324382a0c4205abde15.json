{"ast":null,"code":"import { createElementVNode as _createElementVNode, createTextVNode as _createTextVNode, resolveComponent as _resolveComponent, withCtx as _withCtx, createVNode as _createVNode, createCommentVNode as _createCommentVNode, resolveDirective as _resolveDirective, openBlock as _openBlock, createBlock as _createBlock, withDirectives as _withDirectives, toDisplayString as _toDisplayString, createElementBlock as _createElementBlock } from \"vue\";\nexport function render(_ctx, _cache, $props, $setup, $data, $options) {\n  const _component_el_button = _resolveComponent(\"el-button\");\n  const _component_el_table_column = _resolveComponent(\"el-table-column\");\n  const _component_el_table = _resolveComponent(\"el-table\");\n  const _component_el_input = _resolveComponent(\"el-input\");\n  const _component_el_form_item = _resolveComponent(\"el-form-item\");\n  const _component_el_option = _resolveComponent(\"el-option\");\n  const _component_el_select = _resolveComponent(\"el-select\");\n  const _component_el_form = _resolveComponent(\"el-form\");\n  const _component_el_dialog = _resolveComponent(\"el-dialog\");\n  const _directive_loading = _resolveDirective(\"loading\");\n  return _openBlock(), _createElementBlock(\"div\", null, [_cache[10] || (_cache[10] = _createElementVNode(\"h1\", null, \"产品管理\", -1 /* HOISTED */)), _createVNode(_component_el_button, {\n    type: \"primary\",\n    onClick: $options.showProductForm,\n    style: {\n      \"margin-bottom\": \"20px\"\n    }\n  }, {\n    default: _withCtx(() => _cache[6] || (_cache[6] = [_createTextVNode(\"添加产品\")])),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"onClick\"]), _createCommentVNode(\" 产品表格 \"), _withDirectives((_openBlock(), _createBlock(_component_el_table, {\n    data: $data.products,\n    style: {\n      \"width\": \"100%\"\n    }\n  }, {\n    default: _withCtx(() => [_createVNode(_component_el_table_column, {\n      prop: \"productName\",\n      label: \"产品名称\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"price\",\n      label: \"价格\"\n    }), _createVNode(_component_el_table_column, {\n      prop: \"status\",\n      label: \"状态\"\n    }), _createVNode(_component_el_table_column, {\n      label: \"操作\"\n    }, {\n      default: _withCtx(scope => [_createVNode(_component_el_button, {\n        size: \"small\",\n        onClick: $event => $options.editProduct(scope.row)\n      }, {\n        default: _withCtx(() => _cache[7] || (_cache[7] = [_createTextVNode(\"编辑\")])),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"]), _createVNode(_component_el_button, {\n        size: \"small\",\n        type: \"danger\",\n        onClick: $event => $options.confirmDeleteProduct(scope.row.productId)\n      }, {\n        default: _withCtx(() => _cache[8] || (_cache[8] = [_createTextVNode(\"删除\")])),\n        _: 2 /* DYNAMIC */\n      }, 1032 /* PROPS, DYNAMIC_SLOTS */, [\"onClick\"])]),\n      _: 1 /* STABLE */\n    })]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"data\"])), [[_directive_loading, $data.loading]]), _createCommentVNode(\" 产品表单弹窗 \"), _createVNode(_component_el_dialog, {\n    title: \"产品信息\",\n    visible: $data.dialogVisible,\n    \"onUpdate:visible\": _cache[5] || (_cache[5] = $event => $data.dialogVisible = $event)\n  }, {\n    footer: _withCtx(() => [_createVNode(_component_el_button, {\n      onClick: _cache[4] || (_cache[4] = $event => $data.dialogVisible = false)\n    }, {\n      default: _withCtx(() => _cache[9] || (_cache[9] = [_createTextVNode(\"取 消\")])),\n      _: 1 /* STABLE */\n    }), _createVNode(_component_el_button, {\n      type: \"primary\",\n      onClick: $options.saveProduct\n    }, {\n      default: _withCtx(() => [_createTextVNode(_toDisplayString($data.selectedProduct ? '更新产品' : '添加产品'), 1 /* TEXT */)]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"onClick\"])]),\n    default: _withCtx(() => [_createVNode(_component_el_form, {\n      model: $data.productForm,\n      \"label-width\": \"120px\",\n      size: \"medium\"\n    }, {\n      default: _withCtx(() => [_createVNode(_component_el_form_item, {\n        label: \"产品名称\",\n        rules: [{\n          required: true,\n          message: '请输入产品名称',\n          trigger: 'blur'\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          modelValue: $data.productForm.productName,\n          \"onUpdate:modelValue\": _cache[0] || (_cache[0] = $event => $data.productForm.productName = $event),\n          placeholder: \"请输入产品名称\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"价格\",\n        rules: [{\n          required: true,\n          message: '请输入产品价格',\n          trigger: 'blur'\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          type: \"number\",\n          modelValue: $data.productForm.price,\n          \"onUpdate:modelValue\": _cache[1] || (_cache[1] = $event => $data.productForm.price = $event),\n          placeholder: \"请输入产品价格\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"状态\",\n        rules: [{\n          required: true,\n          message: '请选择状态',\n          trigger: 'change'\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_select, {\n          modelValue: $data.productForm.status,\n          \"onUpdate:modelValue\": _cache[2] || (_cache[2] = $event => $data.productForm.status = $event),\n          placeholder: \"选择状态\"\n        }, {\n          default: _withCtx(() => [_createVNode(_component_el_option, {\n            label: \"可用\",\n            value: \"active\"\n          }), _createVNode(_component_el_option, {\n            label: \"不可用\",\n            value: \"inactive\"\n          })]),\n          _: 1 /* STABLE */\n        }, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      }), _createVNode(_component_el_form_item, {\n        label: \"商家ID\",\n        rules: [{\n          required: true,\n          message: '请输入商家ID',\n          trigger: 'blur'\n        }]\n      }, {\n        default: _withCtx(() => [_createVNode(_component_el_input, {\n          type: \"number\",\n          modelValue: $data.productForm.merchantId,\n          \"onUpdate:modelValue\": _cache[3] || (_cache[3] = $event => $data.productForm.merchantId = $event),\n          placeholder: \"请输入商家ID\"\n        }, null, 8 /* PROPS */, [\"modelValue\"])]),\n        _: 1 /* STABLE */\n      })]),\n      _: 1 /* STABLE */\n    }, 8 /* PROPS */, [\"model\"])]),\n    _: 1 /* STABLE */\n  }, 8 /* PROPS */, [\"visible\"])]);\n}","map":{"version":3,"names":["_createElementBlock","_createElementVNode","_createVNode","_component_el_button","type","onClick","$options","showProductForm","style","default","_withCtx","_cache","_createTextVNode","_","_createCommentVNode","_createBlock","_component_el_table","data","$data","products","_component_el_table_column","prop","label","scope","size","$event","editProduct","row","confirmDeleteProduct","productId","loading","_component_el_dialog","title","visible","dialogVisible","footer","saveProduct","_toDisplayString","selectedProduct","_component_el_form","model","productForm","_component_el_form_item","rules","required","message","trigger","_component_el_input","modelValue","productName","placeholder","price","_component_el_select","status","_component_el_option","value","merchantId"],"sources":["E:\\ecms\\ecmsvue\\src\\views\\Products.vue"],"sourcesContent":["<template>\r\n  <div>\r\n    <h1>产品管理</h1>\r\n    <el-button type=\"primary\" @click=\"showProductForm\" style=\"margin-bottom: 20px;\">添加产品</el-button>\r\n\r\n    <!-- 产品表格 -->\r\n    <el-table :data=\"products\" style=\"width: 100%;\" v-loading=\"loading\">\r\n      <el-table-column prop=\"productName\" label=\"产品名称\" />\r\n      <el-table-column prop=\"price\" label=\"价格\" />\r\n      <el-table-column prop=\"status\" label=\"状态\" />\r\n      <el-table-column label=\"操作\">\r\n        <template #default=\"scope\">\r\n          <el-button size=\"small\" @click=\"editProduct(scope.row)\">编辑</el-button>\r\n          <el-button size=\"small\" type=\"danger\" @click=\"confirmDeleteProduct(scope.row.productId)\">删除</el-button>\r\n        </template>\r\n      </el-table-column>\r\n    </el-table>\r\n\r\n    <!-- 产品表单弹窗 -->\r\n    <el-dialog title=\"产品信息\" v-model:visible=\"dialogVisible\">\r\n      <el-form :model=\"productForm\" label-width=\"120px\" size=\"medium\">\r\n        <el-form-item label=\"产品名称\" :rules=\"[{ required: true, message: '请输入产品名称', trigger: 'blur' }]\">\r\n          <el-input v-model=\"productForm.productName\" placeholder=\"请输入产品名称\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"价格\" :rules=\"[{ required: true, message: '请输入产品价格', trigger: 'blur' }]\">\r\n          <el-input type=\"number\" v-model=\"productForm.price\" placeholder=\"请输入产品价格\" />\r\n        </el-form-item>\r\n        <el-form-item label=\"状态\" :rules=\"[{ required: true, message: '请选择状态', trigger: 'change' }]\">\r\n          <el-select v-model=\"productForm.status\" placeholder=\"选择状态\">\r\n            <el-option label=\"可用\" value=\"active\" />\r\n            <el-option label=\"不可用\" value=\"inactive\" />\r\n          </el-select>\r\n        </el-form-item>\r\n        <el-form-item label=\"商家ID\" :rules=\"[{ required: true, message: '请输入商家ID', trigger: 'blur' }]\">\r\n          <el-input type=\"number\" v-model=\"productForm.merchantId\" placeholder=\"请输入商家ID\" />\r\n        </el-form-item>\r\n      </el-form>\r\n      <template #footer>\r\n        <el-button @click=\"dialogVisible = false\">取 消</el-button>\r\n        <el-button type=\"primary\" @click=\"saveProduct\">{{ selectedProduct ? '更新产品' : '添加产品' }}</el-button>\r\n      </template>\r\n    </el-dialog>\r\n  </div>\r\n</template>\r\n\r\n<script>\r\nimport axios from 'axios';\r\nimport { ElMessageBox } from 'element-plus';\r\n\r\nexport default {\r\n  name: 'ProductManagement',\r\n  data() {\r\n    return {\r\n      products: [],\r\n      loading: false,\r\n      productForm: {\r\n        productName: '',\r\n        price: 0,\r\n        status: 'active',\r\n        merchantId: null,\r\n      },\r\n      selectedProduct: null,\r\n      dialogVisible: false,\r\n    };\r\n  },\r\n  methods: {\r\n    fetchProducts() {\r\n      this.loading = true;\r\n      axios.get('http://localhost:8080/api/products')\r\n          .then(response => {\r\n            this.products = response.data;\r\n          })\r\n          .catch(error => {\r\n            console.error('获取产品时出错:', error);\r\n          })\r\n          .finally(() => {\r\n            this.loading = false;\r\n          });\r\n    },\r\n    showProductForm() {\r\n      this.selectedProduct = null;\r\n      this.productForm = {\r\n        productName: '',\r\n        price: 0,\r\n        status: 'active',\r\n        merchantId: null,\r\n      };\r\n      this.dialogVisible = true;\r\n    },\r\n    editProduct(product) {\r\n      this.selectedProduct = product;\r\n      this.productForm = { ...product }; // 深拷贝以避免引用\r\n      this.dialogVisible = true;\r\n    },\r\n    saveProduct() {\r\n      const url = this.selectedProduct\r\n          ? `http://localhost:8080/api/products/${this.selectedProduct.productId}`\r\n          : 'http://localhost:8080/api/products';\r\n\r\n      const method = this.selectedProduct ? 'put' : 'post';\r\n\r\n      const productData = {\r\n        merchantId: this.productForm.merchantId,\r\n        productName: this.productForm.productName,\r\n        price: this.productForm.price,\r\n        stockQuantity: 0,\r\n        status: this.productForm.status,\r\n      };\r\n\r\n      axios[method](url, productData)\r\n          .then(() => {\r\n            this.fetchProducts();\r\n            this.dialogVisible = false;\r\n          })\r\n          .catch(error => {\r\n            console.error('保存产品时出错:', error);\r\n          });\r\n    },\r\n    confirmDeleteProduct(productId) {\r\n      ElMessageBox.confirm('确定要删除该产品吗?', '警告', {\r\n        confirmButtonText: '确定',\r\n        cancelButtonText: '取消',\r\n        type: 'warning',\r\n      })\r\n          .then(() => {\r\n            this.deleteProduct(productId);\r\n          })\r\n          .catch(() => {\r\n            console.log('删除已取消');\r\n          });\r\n    },\r\n    deleteProduct(productId) {\r\n      axios.delete(`http://localhost:8080/api/products/${productId}`)\r\n          .then(() => {\r\n            this.fetchProducts();\r\n          })\r\n          .catch(error => {\r\n            console.error('删除产品时出错:', error);\r\n          });\r\n    }\r\n  },\r\n  mounted() {\r\n    this.fetchProducts();\r\n  }\r\n};\r\n</script>\r\n\r\n<style scoped>\r\n.el-table {\r\n  width: 100%;\r\n}\r\n</style>\r\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}